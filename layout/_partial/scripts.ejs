<!-- common -->
<%- __js([
    'js/utils.js',
    'js/header-shrink.js',
    'js/back2top.js',
    'js/toggle-theme.js',
    'js/code-block.js',
    'js/main.js',
    'js/libs/anime.min.js'
]) %>

<!-- local-search -->
<% if (theme?.local_search?.enable === true) { %>
    <%- __js('js/local-search.js') %>
<% } %>

<!-- lazyload -->
<% if (theme?.lazyload?.enable === true) { %>
    <%- __js('js/lazyload.js') %>
<% } %>

<div class="<%= theme?.pjax?.enable === true ? 'pjax' : '' %>">
    <% if (is_post()) { %>
        <!-- post-helper -->
        <%- __js('js/post/post-helper.js') %>

        <!-- toc -->
        <% if (theme?.toc?.enable === true) { %>
            <%- __js('js/post/toc.js') %>
        <% } %>

        <!-- copyright-info -->
        <% if (theme?.post?.copyright_info === true) { %>
            <%- __js('js/post/copyright-info.js') %>
        <% } %>

        <!-- share -->
        <% if (theme?.post?.share === true) { %>
            <%- __js('js/post/share.js') %>
        <% } %>
    <% } %>

    <!-- category-page -->
    <% if (is_current('/categories') || is_current('/category')) { %>
        <%- __js('js/page/category-page.js') %>
    <% } %>

    <!-- links-page -->
    <% if (is_current('/links') || is_current('/link')) { %>
        <%- __js('js/page/links-page.js') %>
    <% } %>

    <!-- photos-page -->
    <% if (is_current('/photos') || is_current('/photo')) { %>
        <%- __js('js/page/photos-page.js') %>
    <% } %>
</div>

<!-- mermaid -->
<% if (config?.mermaid?.enable === true) { %>
    <%- partial('common/mermaid') %>
<% } %>

<!-- pjax -->
<% if (theme?.pjax?.enable === true) { %>
    <%- partial('pjax/pjax') %>
<% } %>

<% if (theme?.umami?.enable === true) { %>
    <script 
        async 
        src="<%- site.data.umami.scriptLink %>" 
        data-website-id="<%- site.data.umami.websiteId %>"
        data-domains="<%- site.data.umami.domains %>"
    >
    </script>
    <script type="text/javascript">
        (() => {
            const name = 'outbound-link-click';
            document.querySelectorAll('a').forEach(a => {
            if (a.host !== window.location.host && !a.getAttribute('data-umami-event')) {
                a.setAttribute('data-umami-event', name);
                a.setAttribute('data-umami-event-url', a.href);
            }
            });
        })();
    </script>
<% } %>